<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Viettel Post UI</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/notifications.css" />
  </head>
  <body>
    <!-- HEADER -->
    <header class="header">
      <div class="header-left">
        <button class="menu-toggle" id="menuToggle">
          <span class="hamburger"></span>
          <span class="hamburger"></span>
          <span class="hamburger"></span>
        </button>
        <div class="logo">viettel <span>post</span></div>
      </div>
      <div class="search">
        <input type="text" placeholder="Tra c·ª©u ƒë∆°n h√†ng" />
        <button class="search-btn"><i class="fas fa-search"></i></button>
      </div>
      <div class="user">
        <div class="user-dropdown" id="userDropdown">
          <div class="user-info">
            <span class="username">Thanh Tr√∫c Nguy·ªÖn Th·ªã</span>
            <div class="user-avatar">
              <img src="https://via.placeholder.com/40" alt="avatar" />
              <i class="fas fa-chevron-down dropdown-arrow"></i>
            </div>
          </div>
          <div class="user-menu">
            <ul>
              <li>
                <a href="#"><i class="fas fa-cog"></i> C√†i ƒë·∫∑t t√†i kho·∫£n</a>
              </li>
              <li>
                <a href="#"><i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>

    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <nav class="sidebar-nav">
        <ul class="menu">
          <li class="menu-item active">
            <a href="#" class="menu-link" data-content="home">
              <i class="icon fas fa-home"></i>
              <span class="menu-text">Trang ch·ªß</span>
            </a>
          </li>
          <li class="menu-item">
            <a
              href="#"
              class="menu-link"
              data-content="order/create-order-content.html"
            >
              <i class="icon fas fa-plus-circle"></i>
              <span class="menu-text">T·∫°o ƒë∆°n</span>
            </a>
          </li>
          <li class="menu-item has-submenu" id="quanLyMenu">
            <a href="#" class="menu-link">
              <i class="icon fas fa-tasks"></i>
              <span class="menu-text">Qu·∫£n l√Ω</span>
              <i class="dropdown-icon fas fa-chevron-down"></i>
            </a>
            <ul class="submenu">
              <li>
                <a href="#" class="menu-link" data-content="shipments.html"
                  >Qu·∫£n l√Ω v·∫≠n ƒë∆°n</a
                >
              </li>
              <li>
                <a href="#" class="menu-link" data-content="cargo-value.html"
                  >Th·ªëng k√™ ti·ªÅn h√†ng</a
                >
              </li>
              <li>
                <a href="#" class="menu-link" data-content="revenue.html"
                  >Th·ªëng k√™ doanh thu</a
                >
              </li>
              <li>
                <a
                  href="#"
                  class="menu-link"
                  data-content="manage/processing_order/processing_order.html"
                  >ƒê∆°n h√†ng c·∫ßn x·ª≠ l√Ω</a
                >
              </li>
              <li>
                <a href="#" class="menu-link" data-content="recipients.html"
                  >Danh s√°ch ng∆∞·ªùi nh·∫≠n</a
                >
              </li>
              <li>
                <a href="#" class="menu-link" data-content="feedback.html"
                  >G√≥p √Ω - Khi·∫øu n·∫°i</a
                >
              </li>
            </ul>
          </li>
          <li class="menu-item has-submenu" id="traCuuMenu">
            <a href="#" class="menu-link">
              <i class="icon fas fa-map-marker-alt"></i>
              <span class="menu-text">Tra c·ª©u</span>
              <i class="dropdown-icon fas fa-chevron-down"></i>
            </a>
            <ul class="submenu">
              <li><a href="#">Tra c·ª©u b∆∞u c·ª•c</a></li>
              <li>
                <a
                  href="#"
                  class="menu-link"
                  data-content="research/postage.html"
                  >∆Ø·ªõc t√≠nh c∆∞·ªõc ph√≠</a
                >
              </li>
              <li><a href="#">Tra c·ª©u ƒë·ªãa danh</a></li>
            </ul>
          </li>
          <li class="menu-item has-submenu" id="tienIchMenu">
            <a href="#" class="menu-link">
              <i class="icon fas fa-th"></i>
              <span class="menu-text">Ti·ªán √≠ch</span>
              <i class="dropdown-icon fas fa-chevron-down"></i>
            </a>
            <ul class="submenu">
              <li><a href="#">In nh√£n c·∫£nh b√°o</a></li>
              <li>
                <a href="#"><i class="fas fa-cog"></i> D·ªãch v·ª• ho√†n c∆∞·ªõc</a>
              </li>
            </ul>
          </li>
          <li class="menu-item" id="accountSettingsMenu">
            <a href="./AccountSetting/sidebar.html" class="menu-link">
              <i class="icon fas fa-cog"></i>
              <span class="menu-text">C√†i ƒë·∫∑t t√†i kho·∫£n</span>
            </a>
          </li>
          <li class="menu-item has-submenu" id="hoiDapMenu">
            <a href="#" class="menu-link">
              <i class="icon fas fa-life-ring"></i>
              <span class="menu-text">H·ªèi ƒë√°p tr·ª£ gi√∫p</span>
              <i class="dropdown-icon fas fa-chevron-down"></i>
            </a>
            <ul class="submenu">
              <li><a href="#">C√¢u h·ªèi th∆∞·ªùng g·∫∑p FAQs</a></li>
              <li><a href="#">ƒêi·ªÅu kho·∫£n & quy ƒë·ªãnh</a></li>
              <li><a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t th√¥ng tin</a></li>
            </ul>
          </li>
          <li class="menu-item">
            <a href="#" class="menu-link">
              <i class="icon fas fa-chart-bar"></i>
              <span class="menu-text">Kh·∫£o s√°t</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content" id="mainContent">
      <div class="content-header">
        <h1>Xin ch√†o <strong>Thanh Tr√∫c Nguy·ªÖn Th·ªã</strong></h1>
        <div class="date-picker">
          <input type="date" value="2025-09-23" /> -
          <input type="date" value="2025-10-06" />
        </div>
      </div>

      <div class="dashboard">
        <div class="stats-section">
          <h2><i class="fas fa-chart-line"></i> TH·ªêNG K√ä ƒê∆†N H√ÄNG</h2>
          <div class="stats-cards">
            <div class="stat-card success">
              <div class="stat-info">
                <span class="stat-label"
                  ><i class="fas fa-check-circle"></i> Giao th√†nh c√¥ng</span
                >
                <span class="stat-value">0 (0%)</span>
              </div>
            </div>
            <div class="stat-card failed">
              <div class="stat-info">
                <span class="stat-label"
                  ><i class="fas fa-undo"></i> ƒê√£ ho√†n</span
                >
                <span class="stat-value">0</span>
              </div>
            </div>
          </div>
          <div class="chart-container">
            <canvas id="orderChart" width="400" height="200"></canvas>
          </div>
        </div>

        <div class="top-products">
          <h2><i class="fas fa-chart-pie"></i> TOP 10 S·∫¢N L∆Ø·ª¢NG</h2>
          <p>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi l√∫c 17:21</p>
          <div class="pie-chart">
            <canvas id="pieChart" width="200" height="200"></canvas>
          </div>
        </div>
      </div>
    </main>

    <!-- JavaScript Files -->
    <script src="assets/config.js"></script>
    <script src="assets/utils.js"></script>
    <script src="assets/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const mainContent = document.getElementById("mainContent");
        const accountMenu = document.querySelector("#accountSettingsMenu a");

        accountMenu.addEventListener("click", function (e) {
          e.preventDefault();

          // T·∫£i sidebar.html
          fetch("./AccountSetting/sidebar.html")
            .then((res) => res.text())
            .then((html) => {
              mainContent.innerHTML = html;

              // Khi sidebar load xong, kh·ªüi t·∫°o sidebar
              initSidebarAjax();

              // T·∫£i s·∫µn trang accountDetail.html khi v·ª´a m·ªü "C√†i ƒë·∫∑t t√†i kho·∫£n"
              const accountContent = document.getElementById("accountContent");
              if (accountContent) {
                accountContent.innerHTML = "<p>ƒêang t·∫£i...</p>";
                fetch("./AccountSetting/accountDetail.html")
                  .then((res) => res.text())
                  .then((html) => {
                    accountContent.innerHTML = html;
                  })
                  .catch((err) => {
                    accountContent.innerHTML = `<p style='color:red;'>Kh√¥ng th·ªÉ t·∫£i trang m·∫∑c ƒë·ªãnh.</p>`;
                  });
              }
            })
            .catch((err) => {
              mainContent.innerHTML = `<p style="color:red;">L·ªói t·∫£i sidebar.html</p>`;
            });
        });

        // Handle sender management link clicks
        mainContent.addEventListener("click", function (e) {
          if (e.target.matches('a[data-action="load-sender-management"]')) {
            e.preventDefault();

            // T·∫£i sidebar.html
            fetch("./AccountSetting/sidebar.html")
              .then((res) => res.text())
              .then((html) => {
                mainContent.innerHTML = html;

                // Khi sidebar load xong, kh·ªüi t·∫°o sidebar
                initSidebarAjax();

                // Active th·∫ª li "Th√¥ng tin ng∆∞·ªùi g·ª≠i"
                const senderLink = document.querySelector(
                  '.account-menu .menu-link[href="senderInfo.html"]'
                );
                if (senderLink) {
                  senderLink.parentElement.classList.add("active");
                }

                // T·∫£i trang senderInfo.html
                const accountContent =
                  document.getElementById("accountContent");
                if (accountContent) {
                  accountContent.innerHTML = "<p>ƒêang t·∫£i...</p>";
                  fetch("./AccountSetting/senderInfo.html")
                    .then((res) => res.text())
                    .then((html) => {
                      accountContent.innerHTML = html;
                    })
                    .catch((err) => {
                      accountContent.innerHTML = `<p style='color:red;'>Kh√¥ng th·ªÉ t·∫£i trang qu·∫£n l√Ω ng∆∞·ªùi g·ª≠i.</p>`;
                    });
                }
              })
              .catch((err) => {
                mainContent.innerHTML = `<p style="color:red;">L·ªói t·∫£i sidebar.html</p>`;
              });
          }
        });
      });

      // H√†m x·ª≠ l√Ω click b√™n trong sidebar
      function initSidebarAjax() {
        const accountLinks = document.querySelectorAll(
          ".account-menu .menu-link"
        );
        const accountContent = document.getElementById("accountContent");

        accountLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const page = this.getAttribute("href");

            // üé® Highlight menu ƒëang ch·ªçn
            accountLinks.forEach((l) =>
              l.parentElement.classList.remove("active")
            );
            this.parentElement.classList.add("active");

            accountContent.innerHTML = "<p>ƒêang t·∫£i...</p>";
            fetch(`./AccountSetting/${page}`)
              .then((res) => res.text())
              .then((html) => {
                accountContent.innerHTML = html;
              })
              .catch((err) => {
                accountContent.innerHTML = `<p style="color:red;">L·ªói t·∫£i ${page}</p>`;
              });
          });
        });
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
